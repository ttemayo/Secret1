<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mystery</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Fixed top nav -->
  <nav class="topnav">
    <div class="nav-inner">
      <a class="logo" href="#scenario">Murder Mystery</a>
      <div class="links">
        <a href="#scenario">Scenario</a>
        <a href="#attendees">Attendees</a>
      </div>
    </div>
  </nav>

  <main class="content">
    <!-- Scenario section (top text block) -->
    <section id="scenario" class="section">
      <h1>Scenario</h1>

      <!-- scenario card -->
      <div class="scenario-card" role="region" aria-labelledby="scenario-heading" tabindex="0">
        <p class="scenario-lead">
          It's a beautiful winter evening at the Naghmi Manor...
        </p>

        <!-- optional extra text -->
        <p class="scenario-more" aria-hidden="true">
          
        </p>

        <button type="button" class="scenario-toggle" aria-expanded="false">Read more</button>
      </div>
    </section>

    <!-- Attendees (thumbnail grid) -->
    <section id="attendees" class="section">
      <h2>Attendees</h2>

      <!-- thumb grid: 4 columns -->
      <div class="thumb-grid" aria-label="Attendee thumbnails">

        <!-- Zain -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_zain.png"
                  data-name="Zain — Host"
                  data-bio="<strong>Zain Naghmi</strong><br/>Host of the manor. <br/><br/>Clue: Zain is Zain"
                  aria-label="Open profile for Zain">
            <img src="images/small_zain.png" alt="Zain thumbnail" width="300" height="300">
          </button>
          <figcaption>Zain</figcaption>
        </figure>

        <!-- Hena -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_hena.png"
                  data-name="Hena — Manager"
                  data-bio="<strong>Hena Naghmi</strong><br/>The manor manager.<br/><br/>alskdjflaksdjflkasd"
                  aria-label="Open profile for Hena">
            <img src="images/small_hena.png" alt="Hena thumbnail" width="300" height="300">
          </button>
          <figcaption>Hena</figcaption>
        </figure>

        <!-- Kevin -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_kevin.png"
                  data-name="Kevin — Butler"
                  data-bio="<strong>Kevin</strong><br/>Longtime butler. He knows the household routines and is always on time.<br/><br/>Clue: Is the butler."
                  aria-label="Open profile for Kevin">
            <img src="images/small_kevin.png" alt="Kevin thumbnail" width="300" height="300">
          </button>
          <figcaption>Kevin</figcaption>
        </figure>

        <!-- Mario -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_mario.png"
                  data-name="Wolfgang Storm — Controller Modder"
                  data-bio="<strong>Wolfgang Storm</strong><br/>lol.<br/><br/>The allegations are true"
                  aria-label="Open profile for Mario">
            <img src="images/small_mario.png" alt="Mario thumbnail" width="300" height="300">
          </button>
          <figcaption>Wolfgang Storm</figcaption>
        </figure>

        <!-- Eric -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_eric.png"
                  data-name="Eric — Rival"
                  data-bio="<strong>Eric</strong><br/>lol.<br/><br/>The allegations are true"
                  aria-label="Open profile for Eric">
            <img src="images/small_eric.png" alt="Eric thumbnail" width="300" height="300">
          </button>
          <figcaption>Eric</figcaption>
        </figure>

        <!-- Darren -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_darren.png"
                  data-name="Darren — Doubles Partner"
                  data-bio="<strong>Darren</strong><br/>lol.<br/><br/>The allegations are true"
                  aria-label="Open profile for Darren">
            <img src="images/small_darren.png" alt="Darren thumbnail" width="300" height="300">
          </button>
          <figcaption>Darren</figcaption>
        </figure>

        <!-- Aarij -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_aarij.png"
                  data-name="Ludoo — Streamer"
                  data-bio="<strong>Ludoo</strong><br/>lol.<br/><br/>The allegations are true"
                  aria-label="Open profile for Ludoo">
            <img src="images/small_aarij.png" alt="Ludoo thumbnail" width="300" height="300">
          </button>
          <figcaption>Ludoo</figcaption>
        </figure>

        <!-- Adil -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_adil.png"
                  data-name="Gstubs — Twitch Chatter"
                  data-bio="<strong>Gstubs</strong><br/>lol.<br/><br/>The allegations are true"
                  aria-label="Open profile for Gstubs">
            <img src="images/small_adil.png" alt="Adil thumbnail" width="300" height="300">
          </button>
          <figcaption>Adil</figcaption>
        </figure>

        <!-- David -->
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_david.png"
                  data-name="David — Tuber"
                  data-bio="<strong>David</strong><br/>lol.<br/><br/>The allegations are true"
                  aria-label="Open profile for David">
            <img src="images/small_david.png" alt="David thumbnail" width="300" height="300">
          </button>
          <figcaption>David</figcaption>
        </figure>

        <!-- add more .thumb-item blocks as needed (use data-full / data-name / data-bio) -->
        <!-- EXAMPLE 
        <figure class="thumb-item">
          <button class="thumb"
                  data-full="images/cropped_EXAMPLE.png"
                  data-name="EXAMPLE — Rival"
                  data-bio="<strong>EXAMPLE</strong><br/>lol.<br/><br/>The allegations are true"
                  aria-label="Open profile for EXAMPLE">
            <img src="images/small_EXAMPLE.png" alt="EXAMPLE thumbnail" width="300" height="300">
          </button>
          <figcaption>EXAMPLE</figcaption>
        </figure>
        -->

      </div>
    </section>
  </main>

  <footer class="site-footer">
    © Kevin Hoang
  </footer>

  <!-- CHARACTER CARD MODAL -->
  <div id="cardModal" class="card-modal" aria-hidden="true" role="dialog" aria-label="Character card">
    <div class="card-backdrop" data-action="close"></div>

    <div class="card-panel" role="document">
      <button class="card-close" aria-label="Close character card" data-action="close">&times;</button>

      <div class="card-inner">
        <div class="card-image-wrap">
          <img id="cardImage" src="" alt="Full character image">
        </div>

        <div class="card-text">
          <h3 id="cardName">Character Name</h3>
          <!-- card-bio will be replaced per character -->
          <div id="cardBio" class="card-bio" aria-live="polite"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // scenario toggle logic
  document.addEventListener('DOMContentLoaded', () => {
    const card = document.querySelector('.scenario-card');
    if (!card) return;

    const btn = card.querySelector('.scenario-toggle');
    const more = card.querySelector('.scenario-more');

    if (!btn || !more) return;

    more.style.maxHeight = '0px';
    more.setAttribute('aria-hidden', 'true');

    function setExpanded(expanded) {
      btn.setAttribute('aria-expanded', expanded ? 'true' : 'false');
      if (expanded) {
        more.style.maxHeight = `${more.scrollHeight}px`;
        more.setAttribute('aria-hidden', 'false');
        card.classList.add('expanded');
      } else {
        more.style.maxHeight = '0px';
        more.setAttribute('aria-hidden', 'true');
        card.classList.remove('expanded');
      }
    }

    btn.addEventListener('click', () => {
      const isExpanded = btn.getAttribute('aria-expanded') === 'true';
      setExpanded(!isExpanded);
    });

    card.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        btn.click();
      }
    });

    more.addEventListener('transitionend', (ev) => {
      if (ev.propertyName === 'max-height' && btn.getAttribute('aria-expanded') === 'true') {
        more.style.maxHeight = 'none';
      }
    });
  });

  // Thumbnail -> modal logic (uses per-button data-bio)
  (function () {
    const modal = document.getElementById('cardModal');
    const modalBackdrop = modal.querySelector('.card-backdrop');
    const modalCloseButtons = modal.querySelectorAll('[data-action="close"]');
    const cardImage = document.getElementById('cardImage');
    const cardName = document.getElementById('cardName');
    const cardBio = document.getElementById('cardBio');

    function openCard(fullSrc, name, bioHtml, thumbBtn) {
      cardImage.src = fullSrc;
      cardImage.alt = name;
      cardName.textContent = name;
      // bioHtml contains markup (set by data-bio)
      cardBio.innerHTML = bioHtml || '<p>No details provided.</p>';

      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden'; // prevent background scroll
      modal.querySelector('.card-close').focus();
      modal._lastFocus = thumbBtn || document.activeElement;
    }

    function closeCard() {
      modal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      cardImage.src = '';
      cardBio.innerHTML = '';
      if (modal._lastFocus) modal._lastFocus.focus();
    }

    // attach handlers
    document.querySelectorAll('.thumb').forEach(btn => {
      btn.addEventListener('click', () => {
        const full = btn.getAttribute('data-full');
        const name = btn.getAttribute('data-name') || 'Character';
        const bio = btn.getAttribute('data-bio') || '';
        openCard(full, name, bio, btn);
      });

      btn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });
    });

    modalBackdrop.addEventListener('click', closeCard);
    modalCloseButtons.forEach(b => b.addEventListener('click', closeCard));
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modal.getAttribute('aria-hidden') === 'false') closeCard();
    });

  })();
  </script>

</body>
</html>
